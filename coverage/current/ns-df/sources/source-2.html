


<!DOCTYPE html>
<html id="htmlId">
<head>
  <title>Coverage Report > ValidationResult</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">org.eclipse.rdf4j.sail.shacl.results</a>
</div>

<h1>Coverage Summary for Class: ValidationResult (org.eclipse.rdf4j.sail.shacl.results)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">ValidationResult</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/15)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/54)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/64)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/*******************************************************************************
&nbsp; * Copyright (c) 2019 Eclipse RDF4J contributors.
&nbsp; *
&nbsp; * All rights reserved. This program and the accompanying materials
&nbsp; * are made available under the terms of the Eclipse Distribution License v1.0
&nbsp; * which accompanies this distribution, and is available at
&nbsp; * http://www.eclipse.org/org/documents/edl-v10.php.
&nbsp; *
&nbsp; * SPDX-License-Identifier: BSD-3-Clause
&nbsp; *******************************************************************************/
&nbsp;
&nbsp;package org.eclipse.rdf4j.sail.shacl.results;
&nbsp;
&nbsp;import static org.eclipse.rdf4j.model.util.Values.bnode;
&nbsp;
&nbsp;import java.util.ArrayList;
&nbsp;import java.util.Arrays;
&nbsp;import java.util.Collections;
&nbsp;import java.util.HashSet;
&nbsp;import java.util.List;
&nbsp;import java.util.Objects;
&nbsp;import java.util.Optional;
&nbsp;import java.util.Set;
&nbsp;import java.util.stream.Collectors;
&nbsp;
&nbsp;import org.eclipse.rdf4j.model.Model;
&nbsp;import org.eclipse.rdf4j.model.Resource;
&nbsp;import org.eclipse.rdf4j.model.Value;
&nbsp;import org.eclipse.rdf4j.model.vocabulary.RDF;
&nbsp;import org.eclipse.rdf4j.model.vocabulary.RDF4J;
&nbsp;import org.eclipse.rdf4j.model.vocabulary.RSX;
&nbsp;import org.eclipse.rdf4j.model.vocabulary.SHACL;
&nbsp;import org.eclipse.rdf4j.sail.shacl.SourceConstraintComponent;
&nbsp;import org.eclipse.rdf4j.sail.shacl.ast.PropertyShape;
&nbsp;import org.eclipse.rdf4j.sail.shacl.ast.Severity;
&nbsp;import org.eclipse.rdf4j.sail.shacl.ast.Shape;
&nbsp;import org.eclipse.rdf4j.sail.shacl.ast.constraintcomponents.ConstraintComponent;
&nbsp;import org.eclipse.rdf4j.sail.shacl.ast.paths.Path;
&nbsp;
&nbsp;/**
&nbsp; * The ValidationResult represents the results from a SHACL validation in an easy-to-use Java API.
&nbsp; *
&nbsp; * @deprecated The ValidationResult is deprecated because it is planned moved to a new package to allow it to be used
&nbsp; *             with remote validation results.
&nbsp; */
<b class="nc">&nbsp;@Deprecated</b>
&nbsp;public class ValidationResult {
&nbsp;
&nbsp;	private Resource id;
&nbsp;	private final Optional&lt;Value&gt; value;
&nbsp;	private final Shape shape;
&nbsp;
&nbsp;	private final SourceConstraintComponent sourceConstraintComponent;
&nbsp;	private final Severity severity;
&nbsp;	private final Value focusNode;
&nbsp;	private final Resource[] dataGraphs;
&nbsp;	private final Resource[] shapesGraphs;
&nbsp;	private Path path;
&nbsp;	private ValidationResult detail;
&nbsp;
&nbsp;	public ValidationResult(Value focusNode, Value value, Shape shape,
&nbsp;			SourceConstraintComponent sourceConstraintComponent, Severity severity, ConstraintComponent.Scope scope,
<b class="nc">&nbsp;			Resource[] dataGraphs, Resource[] shapesGraphs) {</b>
<b class="nc">&nbsp;		this.focusNode = focusNode;</b>
<b class="nc">&nbsp;		assert this.focusNode != null;</b>
<b class="nc">&nbsp;		this.sourceConstraintComponent = sourceConstraintComponent;</b>
<b class="nc">&nbsp;		this.shape = shape;</b>
&nbsp;
<b class="nc">&nbsp;		if (sourceConstraintComponent.producesValidationResultValue()) {</b>
<b class="nc">&nbsp;			assert value != null;</b>
<b class="nc">&nbsp;			this.value = Optional.of(value);</b>
&nbsp;		} else {
<b class="nc">&nbsp;			assert scope != ConstraintComponent.Scope.propertyShape || value == null;</b>
<b class="nc">&nbsp;			this.value = Optional.empty();</b>
&nbsp;		}
&nbsp;
<b class="nc">&nbsp;		if (shape instanceof PropertyShape) {</b>
<b class="nc">&nbsp;			this.path = ((PropertyShape) shape).getPath();</b>
&nbsp;		}
<b class="nc">&nbsp;		this.severity = severity;</b>
<b class="nc">&nbsp;		this.dataGraphs = dataGraphs;</b>
<b class="nc">&nbsp;		this.shapesGraphs = shapesGraphs;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * @return ValidationResult with more information as to what failed. Usually for nested Shapes in eg. sh:or.
&nbsp;	 */
&nbsp;	public ValidationResult getDetail() {
<b class="nc">&nbsp;		return detail;</b>
&nbsp;	}
&nbsp;
&nbsp;	public void setDetail(ValidationResult detail) {
<b class="nc">&nbsp;		this.detail = detail;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * @return all ValidationResult(s) with more information as to what failed. Usually for nested Shapes in eg. sh:or.
&nbsp;	 */
&nbsp;	public List&lt;ValidationResult&gt; getDetails() {
&nbsp;
<b class="nc">&nbsp;		ArrayList&lt;ValidationResult&gt; validationResults = new ArrayList&lt;&gt;();</b>
&nbsp;
<b class="nc">&nbsp;		ValidationResult temp = detail;</b>
<b class="nc">&nbsp;		while (temp != null) {</b>
<b class="nc">&nbsp;			validationResults.add(temp);</b>
<b class="nc">&nbsp;			temp = temp.detail;</b>
&nbsp;		}
&nbsp;
<b class="nc">&nbsp;		return validationResults;</b>
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	public Model asModel(Model model) {
<b class="nc">&nbsp;		return asModel(model, new HashSet&lt;&gt;());</b>
&nbsp;	}
&nbsp;
&nbsp;	public Model asModel(Model model, Set&lt;Resource&gt; rdfListDedupe) {
&nbsp;
<b class="nc">&nbsp;		model.add(getId(), RDF.TYPE, SHACL.VALIDATION_RESULT);</b>
&nbsp;
<b class="nc">&nbsp;		model.add(getId(), SHACL.FOCUS_NODE, focusNode);</b>
&nbsp;
<b class="nc">&nbsp;		for (Resource graph : contextsToSet(dataGraphs)) {</b>
<b class="nc">&nbsp;			model.add(getId(), RSX.dataGraph, graph);</b>
<b class="nc">&nbsp;		}</b>
&nbsp;
<b class="nc">&nbsp;		for (Resource graph : contextsToSet(shapesGraphs)) {</b>
<b class="nc">&nbsp;			model.add(getId(), RSX.shapesGraph, graph);</b>
<b class="nc">&nbsp;		}</b>
&nbsp;
<b class="nc">&nbsp;		value.ifPresent(v -&gt; model.add(getId(), SHACL.VALUE, v));</b>
&nbsp;
<b class="nc">&nbsp;		if (this.path != null) {</b>
<b class="nc">&nbsp;			path.toModel(path.getId(), null, model, new HashSet&lt;&gt;());</b>
<b class="nc">&nbsp;			model.add(getId(), SHACL.RESULT_PATH, path.getId());</b>
&nbsp;		}
&nbsp;
<b class="nc">&nbsp;		model.add(getId(), SHACL.SOURCE_CONSTRAINT_COMPONENT, getSourceConstraintComponent().getIri());</b>
<b class="nc">&nbsp;		model.add(getId(), SHACL.RESULT_SEVERITY, severity.getIri());</b>
&nbsp;
&nbsp;		// TODO: Figure out how sh:detail should work!
&nbsp;//		if (detail != null) {
&nbsp;//			model.add(getId(), SHACL.DETAIL, detail.getId());
&nbsp;//			detail.asModel(model);
&nbsp;//		}
&nbsp;
<b class="nc">&nbsp;		shape.toModel(getId(), SHACL.SOURCE_SHAPE, model, new HashSet&lt;&gt;());</b>
&nbsp;
<b class="nc">&nbsp;		return model;</b>
&nbsp;	}
&nbsp;
&nbsp;	private static Set&lt;Resource&gt; contextsToSet(Resource[] context) {
<b class="nc">&nbsp;		if (context == null || context.length == 0) {</b>
<b class="nc">&nbsp;			return Collections.emptySet();</b>
&nbsp;		}
&nbsp;
<b class="nc">&nbsp;		return Arrays.stream(context)</b>
<b class="nc">&nbsp;				.map(c -&gt; c == null ? RDF4J.NIL : c)</b>
<b class="nc">&nbsp;				.collect(Collectors.toSet());</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * @return the path, as specified in the Shape, that caused the violation
&nbsp;	 */
&nbsp;	private Path getPath() {
<b class="nc">&nbsp;		return path;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * @return the focus node, aka. the subject, that caused the violation
&nbsp;	 */
&nbsp;	private Value getFocusNode() {
<b class="nc">&nbsp;		return focusNode;</b>
&nbsp;	}
&nbsp;
&nbsp;	public final Resource getId() {
<b class="nc">&nbsp;		if (id == null) {</b>
<b class="nc">&nbsp;			id = bnode();</b>
&nbsp;		}
<b class="nc">&nbsp;		return id;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * @return the type of the source constraint that caused the violation
&nbsp;	 */
&nbsp;	public SourceConstraintComponent getSourceConstraintComponent() {
<b class="nc">&nbsp;		return sourceConstraintComponent;</b>
&nbsp;	}
&nbsp;
&nbsp;	@Override
&nbsp;	public String toString() {
<b class="nc">&nbsp;		return &quot;ValidationResult{&quot; +</b>
&nbsp;				&quot;focusNode=&quot; + focusNode +
<b class="nc">&nbsp;				&quot;, value=&quot; + value.orElse(null) +</b>
<b class="nc">&nbsp;				&quot;, shape=&quot; + shape.getId() +</b>
&nbsp;				&quot;, path=&quot; + path +
&nbsp;				&quot;, sourceConstraintComponent=&quot; + sourceConstraintComponent +
&nbsp;				&quot;, severity=&quot; + severity +
&nbsp;				&quot;, detail=&quot; + detail +
&nbsp;				&#39;}&#39;;
&nbsp;	}
&nbsp;
&nbsp;	@Override
&nbsp;	public boolean equals(Object o) {
<b class="nc">&nbsp;		if (this == o) {</b>
<b class="nc">&nbsp;			return true;</b>
&nbsp;		}
<b class="nc">&nbsp;		if (o == null || getClass() != o.getClass()) {</b>
<b class="nc">&nbsp;			return false;</b>
&nbsp;		}
<b class="nc">&nbsp;		ValidationResult that = (ValidationResult) o;</b>
<b class="nc">&nbsp;		return value.equals(that.value) &amp;&amp; shape.equals(that.shape)</b>
&nbsp;				&amp;&amp; sourceConstraintComponent == that.sourceConstraintComponent &amp;&amp; severity == that.severity
<b class="nc">&nbsp;				&amp;&amp; focusNode.equals(that.focusNode) &amp;&amp; Objects.equals(path, that.path)</b>
<b class="nc">&nbsp;				&amp;&amp; Objects.equals(detail, that.detail);</b>
&nbsp;	}
&nbsp;
&nbsp;	@Override
&nbsp;	public int hashCode() {
<b class="nc">&nbsp;		return Objects.hash(value, shape, sourceConstraintComponent, severity, focusNode, path, detail);</b>
&nbsp;	}
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2022-09-18 08:20</div>
</div>
</body>
</html>
