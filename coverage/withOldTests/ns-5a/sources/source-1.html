


<!DOCTYPE html>
<html id="htmlId">
<head>
  <title>Coverage Report > AbstractModel</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">org.eclipse.rdf4j.model.impl</a>
</div>

<h1>Coverage Summary for Class: AbstractModel (org.eclipse.rdf4j.model.impl)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">AbstractModel</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (10/20)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    42.1%
  </span>
  <span class="absValue">
    (16/38)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    38.8%
  </span>
  <span class="absValue">
    (31/80)
  </span>
</td>
</tr>
  <tr>
    <td class="name">AbstractModel$1</td>
<td class="coverageStat">
  <span class="percent">
    33.3%
  </span>
  <span class="absValue">
    (2/6)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    20%
  </span>
  <span class="absValue">
    (2/10)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">AbstractModel$2</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/6)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/10)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">AbstractModel$3</td>
<td class="coverageStat">
  <span class="percent">
    33.3%
  </span>
  <span class="absValue">
    (2/6)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    20%
  </span>
  <span class="absValue">
    (2/10)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">AbstractModel$4</td>
<td class="coverageStat">
  <span class="percent">
    33.3%
  </span>
  <span class="absValue">
    (2/6)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    20%
  </span>
  <span class="absValue">
    (2/10)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">AbstractModel$ValueSet</td>
<td class="coverageStat">
  <span class="percent">
    30.8%
  </span>
  <span class="absValue">
    (4/13)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    8.3%
  </span>
  <span class="absValue">
    (2/24)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    14.8%
  </span>
  <span class="absValue">
    (9/61)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">AbstractModel$ValueSet$ValueSetIterator</td>
<td class="coverageStat">
  <span class="percent">
    83.3%
  </span>
  <span class="absValue">
    (5/6)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (8/16)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    69.2%
  </span>
  <span class="absValue">
    (18/26)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    39.7%
  </span>
  <span class="absValue">
    (25/63)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    26.5%
  </span>
  <span class="absValue">
    (26/98)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    30.9%
  </span>
  <span class="absValue">
    (64/207)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/*******************************************************************************
&nbsp; * Copyright (c) 2015 Eclipse RDF4J contributors, Aduna, and others.
&nbsp; *
&nbsp; * All rights reserved. This program and the accompanying materials
&nbsp; * are made available under the terms of the Eclipse Distribution License v1.0
&nbsp; * which accompanies this distribution, and is available at
&nbsp; * http://www.eclipse.org/org/documents/edl-v10.php.
&nbsp; *
&nbsp; * SPDX-License-Identifier: BSD-3-Clause
&nbsp; *******************************************************************************/
&nbsp;package org.eclipse.rdf4j.model.impl;
&nbsp;
&nbsp;import java.util.AbstractSet;
&nbsp;import java.util.ArrayList;
&nbsp;import java.util.Collection;
&nbsp;import java.util.Iterator;
&nbsp;import java.util.LinkedHashSet;
&nbsp;import java.util.List;
&nbsp;import java.util.NoSuchElementException;
&nbsp;import java.util.Set;
&nbsp;
&nbsp;import org.eclipse.rdf4j.model.IRI;
&nbsp;import org.eclipse.rdf4j.model.Model;
&nbsp;import org.eclipse.rdf4j.model.Resource;
&nbsp;import org.eclipse.rdf4j.model.Statement;
&nbsp;import org.eclipse.rdf4j.model.Value;
&nbsp;
&nbsp;/**
&nbsp; * Provides basic operations that are common to all Models.
&nbsp; */
<b class="fc">&nbsp;public abstract class AbstractModel extends AbstractSet&lt;Statement&gt; implements Model {</b>
&nbsp;
&nbsp;	private static final long serialVersionUID = 4254119331281455614L;
&nbsp;
&nbsp;	@Override
&nbsp;	public Model unmodifiable() {
<b class="nc">&nbsp;		return new UnmodifiableModel(this);</b>
&nbsp;	}
&nbsp;
&nbsp;	@Override
&nbsp;	public boolean add(Statement st) {
<b class="nc">&nbsp;		return add(st.getSubject(), st.getPredicate(), st.getObject(), st.getContext());</b>
&nbsp;	}
&nbsp;
&nbsp;	@Override
&nbsp;	public boolean isEmpty() {
<b class="pc">&nbsp;		return !contains(null, null, null);</b>
&nbsp;	}
&nbsp;
&nbsp;	@Override
&nbsp;	public boolean containsAll(Collection&lt;?&gt; c) {
<b class="fc">&nbsp;		Iterator&lt;?&gt; e = c.iterator();</b>
&nbsp;		try {
<b class="fc">&nbsp;			while (e.hasNext()) {</b>
<b class="pc">&nbsp;				if (!contains(e.next())) {</b>
<b class="nc">&nbsp;					return false;</b>
&nbsp;				}
&nbsp;			}
<b class="fc">&nbsp;			return true;</b>
&nbsp;		} finally {
<b class="fc">&nbsp;			closeIterator(c, e);</b>
<b class="nc">&nbsp;		}</b>
&nbsp;	}
&nbsp;
&nbsp;	@Override
&nbsp;	public boolean removeAll(Collection&lt;?&gt; c) {
<b class="fc">&nbsp;		boolean modified = false;</b>
<b class="pc">&nbsp;		if (size() &gt; c.size()) {</b>
<b class="nc">&nbsp;			Iterator&lt;?&gt; i = c.iterator();</b>
&nbsp;			try {
<b class="nc">&nbsp;				while (i.hasNext()) {</b>
<b class="nc">&nbsp;					modified |= remove(i.next());</b>
&nbsp;				}
&nbsp;			} finally {
<b class="nc">&nbsp;				closeIterator(c, i);</b>
<b class="nc">&nbsp;			}</b>
<b class="nc">&nbsp;		} else {</b>
<b class="fc">&nbsp;			Iterator&lt;?&gt; i = iterator();</b>
&nbsp;			try {
<b class="fc">&nbsp;				while (i.hasNext()) {</b>
<b class="pc">&nbsp;					if (c.contains(i.next())) {</b>
<b class="fc">&nbsp;						i.remove();</b>
<b class="fc">&nbsp;						modified = true;</b>
&nbsp;					}
&nbsp;				}
&nbsp;			} finally {
<b class="fc">&nbsp;				closeIterator(i);</b>
<b class="fc">&nbsp;			}</b>
&nbsp;		}
<b class="fc">&nbsp;		return modified;</b>
&nbsp;	}
&nbsp;
&nbsp;	@Override
&nbsp;	public Object[] toArray() {
&nbsp;		// Estimate size of array; be prepared to see more or fewer elements
<b class="nc">&nbsp;		Iterator&lt;Statement&gt; it = iterator();</b>
&nbsp;		try {
<b class="nc">&nbsp;			List&lt;Object&gt; r = new ArrayList&lt;&gt;(size());</b>
<b class="nc">&nbsp;			while (it.hasNext()) {</b>
<b class="nc">&nbsp;				r.add(it.next());</b>
&nbsp;			}
<b class="nc">&nbsp;			return r.toArray();</b>
&nbsp;		} finally {
<b class="nc">&nbsp;			closeIterator(it);</b>
<b class="nc">&nbsp;		}</b>
&nbsp;	}
&nbsp;
&nbsp;	@Override
&nbsp;	public &lt;T&gt; T[] toArray(T[] a) {
&nbsp;		// Estimate size of array; be prepared to see more or fewer elements
<b class="nc">&nbsp;		Iterator&lt;Statement&gt; it = iterator();</b>
&nbsp;		try {
<b class="nc">&nbsp;			List&lt;Object&gt; r = new ArrayList&lt;&gt;(size());</b>
<b class="nc">&nbsp;			while (it.hasNext()) {</b>
<b class="nc">&nbsp;				r.add(it.next());</b>
&nbsp;			}
<b class="nc">&nbsp;			return r.toArray(a);</b>
&nbsp;		} finally {
<b class="nc">&nbsp;			closeIterator(it);</b>
<b class="nc">&nbsp;		}</b>
&nbsp;	}
&nbsp;
&nbsp;	@Override
&nbsp;	public boolean addAll(Collection&lt;? extends Statement&gt; c) {
<b class="fc">&nbsp;		Iterator&lt;? extends Statement&gt; e = c.iterator();</b>
&nbsp;		try {
<b class="fc">&nbsp;			boolean modified = false;</b>
<b class="fc">&nbsp;			while (e.hasNext()) {</b>
<b class="fc">&nbsp;				if (add(e.next())) {</b>
<b class="fc">&nbsp;					modified = true;</b>
&nbsp;				}
&nbsp;			}
<b class="fc">&nbsp;			return modified;</b>
&nbsp;		} finally {
<b class="fc">&nbsp;			closeIterator(c, e);</b>
<b class="nc">&nbsp;		}</b>
&nbsp;	}
&nbsp;
&nbsp;	@Override
&nbsp;	public boolean retainAll(Collection&lt;?&gt; c) {
<b class="nc">&nbsp;		Iterator&lt;Statement&gt; e = iterator();</b>
&nbsp;		try {
<b class="nc">&nbsp;			boolean modified = false;</b>
<b class="nc">&nbsp;			while (e.hasNext()) {</b>
<b class="nc">&nbsp;				if (!c.contains(e.next())) {</b>
<b class="nc">&nbsp;					e.remove();</b>
<b class="nc">&nbsp;					modified = true;</b>
&nbsp;				}
&nbsp;			}
<b class="nc">&nbsp;			return modified;</b>
&nbsp;		} finally {
<b class="nc">&nbsp;			closeIterator(e);</b>
<b class="nc">&nbsp;		}</b>
&nbsp;	}
&nbsp;
&nbsp;	@Override
&nbsp;	public void clear() {
<b class="nc">&nbsp;		remove(null, null, null);</b>
&nbsp;	}
&nbsp;
&nbsp;	@Override
&nbsp;	public boolean clear(Resource... contexts) {
<b class="nc">&nbsp;		return remove(null, null, null, contexts);</b>
&nbsp;	}
&nbsp;
&nbsp;	@Override
&nbsp;	public boolean remove(Object o) {
<b class="nc">&nbsp;		if (o instanceof Statement) {</b>
<b class="nc">&nbsp;			if (isEmpty()) {</b>
<b class="nc">&nbsp;				return false;</b>
&nbsp;			}
<b class="nc">&nbsp;			Statement st = (Statement) o;</b>
<b class="nc">&nbsp;			return remove(st.getSubject(), st.getPredicate(), st.getObject(), st.getContext());</b>
&nbsp;		}
<b class="nc">&nbsp;		return false;</b>
&nbsp;	}
&nbsp;
&nbsp;	@Override
&nbsp;	public boolean contains(Object o) {
<b class="nc">&nbsp;		if (o instanceof Statement) {</b>
<b class="nc">&nbsp;			Statement st = (Statement) o;</b>
<b class="nc">&nbsp;			return contains(st.getSubject(), st.getPredicate(), st.getObject(), st.getContext());</b>
&nbsp;		}
<b class="nc">&nbsp;		return false;</b>
&nbsp;	}
&nbsp;
&nbsp;	@Override
&nbsp;	public Set&lt;Resource&gt; subjects() {
<b class="fc">&nbsp;		return new ValueSet&lt;&gt;() {</b>
&nbsp;
&nbsp;			@Override
&nbsp;			public boolean contains(Object o) {
<b class="nc">&nbsp;				if (o instanceof Resource) {</b>
<b class="nc">&nbsp;					return AbstractModel.this.contains((Resource) o, null, null);</b>
&nbsp;				}
<b class="nc">&nbsp;				return false;</b>
&nbsp;			}
&nbsp;
&nbsp;			@Override
&nbsp;			public boolean remove(Object o) {
<b class="nc">&nbsp;				if (o instanceof Resource) {</b>
<b class="nc">&nbsp;					return AbstractModel.this.remove((Resource) o, null, null);</b>
&nbsp;				}
<b class="nc">&nbsp;				return false;</b>
&nbsp;			}
&nbsp;
&nbsp;			@Override
&nbsp;			public boolean add(Resource subj) {
<b class="nc">&nbsp;				return AbstractModel.this.add(subj, null, null);</b>
&nbsp;			}
&nbsp;
&nbsp;			@Override
&nbsp;			protected Resource term(Statement st) {
<b class="fc">&nbsp;				return st.getSubject();</b>
&nbsp;			}
&nbsp;
&nbsp;			@Override
&nbsp;			protected void removeIteration(Iterator&lt;Statement&gt; iter, Resource subj) {
<b class="nc">&nbsp;				AbstractModel.this.removeTermIteration(iter, subj, null, null);</b>
&nbsp;			}
&nbsp;		};
&nbsp;	}
&nbsp;
&nbsp;	@Override
&nbsp;	public Set&lt;IRI&gt; predicates() {
<b class="nc">&nbsp;		return new ValueSet&lt;&gt;() {</b>
&nbsp;
&nbsp;			@Override
&nbsp;			public boolean contains(Object o) {
<b class="nc">&nbsp;				if (o instanceof IRI) {</b>
<b class="nc">&nbsp;					return AbstractModel.this.contains(null, (IRI) o, null);</b>
&nbsp;				}
<b class="nc">&nbsp;				return false;</b>
&nbsp;			}
&nbsp;
&nbsp;			@Override
&nbsp;			public boolean remove(Object o) {
<b class="nc">&nbsp;				if (o instanceof IRI) {</b>
<b class="nc">&nbsp;					return AbstractModel.this.remove(null, (IRI) o, null);</b>
&nbsp;				}
<b class="nc">&nbsp;				return false;</b>
&nbsp;			}
&nbsp;
&nbsp;			@Override
&nbsp;			public boolean add(IRI pred) {
<b class="nc">&nbsp;				return AbstractModel.this.add(null, pred, null);</b>
&nbsp;			}
&nbsp;
&nbsp;			@Override
&nbsp;			protected IRI term(Statement st) {
<b class="nc">&nbsp;				return st.getPredicate();</b>
&nbsp;			}
&nbsp;
&nbsp;			@Override
&nbsp;			protected void removeIteration(Iterator&lt;Statement&gt; iter, IRI pred) {
<b class="nc">&nbsp;				AbstractModel.this.removeTermIteration(iter, null, pred, null);</b>
&nbsp;			}
&nbsp;		};
&nbsp;	}
&nbsp;
&nbsp;	@Override
&nbsp;	public Set&lt;Value&gt; objects() {
<b class="fc">&nbsp;		return new ValueSet&lt;&gt;() {</b>
&nbsp;
&nbsp;			@Override
&nbsp;			public boolean contains(Object o) {
<b class="nc">&nbsp;				if (o instanceof Value) {</b>
<b class="nc">&nbsp;					return AbstractModel.this.contains(null, null, (Value) o);</b>
&nbsp;				}
<b class="nc">&nbsp;				return false;</b>
&nbsp;			}
&nbsp;
&nbsp;			@Override
&nbsp;			public boolean remove(Object o) {
<b class="nc">&nbsp;				if (o instanceof Value) {</b>
<b class="nc">&nbsp;					return AbstractModel.this.remove(null, null, (Value) o);</b>
&nbsp;				}
<b class="nc">&nbsp;				return false;</b>
&nbsp;			}
&nbsp;
&nbsp;			@Override
&nbsp;			public boolean add(Value obj) {
<b class="nc">&nbsp;				return AbstractModel.this.add(null, null, obj);</b>
&nbsp;			}
&nbsp;
&nbsp;			@Override
&nbsp;			protected Value term(Statement st) {
<b class="fc">&nbsp;				return st.getObject();</b>
&nbsp;			}
&nbsp;
&nbsp;			@Override
&nbsp;			protected void removeIteration(Iterator&lt;Statement&gt; iter, Value obj) {
<b class="nc">&nbsp;				AbstractModel.this.removeTermIteration(iter, null, null, obj);</b>
&nbsp;			}
&nbsp;		};
&nbsp;	}
&nbsp;
&nbsp;	@Override
&nbsp;	public Set&lt;Resource&gt; contexts() {
<b class="fc">&nbsp;		return new ValueSet&lt;&gt;() {</b>
&nbsp;
&nbsp;			@Override
&nbsp;			public boolean contains(Object o) {
<b class="nc">&nbsp;				if (o instanceof Resource || o == null) {</b>
<b class="nc">&nbsp;					return AbstractModel.this.contains(null, null, null, (Resource) o);</b>
&nbsp;				}
<b class="nc">&nbsp;				return false;</b>
&nbsp;			}
&nbsp;
&nbsp;			@Override
&nbsp;			public boolean remove(Object o) {
<b class="nc">&nbsp;				if (o instanceof Resource || o == null) {</b>
<b class="nc">&nbsp;					return AbstractModel.this.remove(null, null, null, (Resource) o);</b>
&nbsp;				}
<b class="nc">&nbsp;				return false;</b>
&nbsp;			}
&nbsp;
&nbsp;			@Override
&nbsp;			public boolean add(Resource context) {
<b class="nc">&nbsp;				return AbstractModel.this.add(null, null, null, context);</b>
&nbsp;			}
&nbsp;
&nbsp;			@Override
&nbsp;			protected Resource term(Statement st) {
<b class="fc">&nbsp;				return st.getContext();</b>
&nbsp;			}
&nbsp;
&nbsp;			@Override
&nbsp;			protected void removeIteration(Iterator&lt;Statement&gt; iter, Resource term) {
<b class="nc">&nbsp;				AbstractModel.this.removeTermIteration(iter, null, null, null, term);</b>
&nbsp;			}
&nbsp;		};
&nbsp;	}
&nbsp;
<b class="fc">&nbsp;	private abstract class ValueSet&lt;V extends Value&gt; extends AbstractSet&lt;V&gt; {</b>
&nbsp;
&nbsp;		private final class ValueSetIterator implements Iterator&lt;V&gt; {
&nbsp;
&nbsp;			private final Iterator&lt;Statement&gt; iter;
&nbsp;
<b class="fc">&nbsp;			private final Set&lt;V&gt; set = new LinkedHashSet&lt;&gt;();</b>
&nbsp;
&nbsp;			private Statement current;
&nbsp;
&nbsp;			private Statement next;
&nbsp;
<b class="fc">&nbsp;			private ValueSetIterator(Iterator&lt;Statement&gt; iter) {</b>
<b class="fc">&nbsp;				this.iter = iter;</b>
&nbsp;			}
&nbsp;
&nbsp;			@Override
&nbsp;			public boolean hasNext() {
<b class="pc">&nbsp;				if (next == null) {</b>
<b class="fc">&nbsp;					next = findNext();</b>
&nbsp;				}
<b class="fc">&nbsp;				return next != null;</b>
&nbsp;			}
&nbsp;
&nbsp;			@Override
&nbsp;			public V next() {
<b class="pc">&nbsp;				if (next == null) {</b>
<b class="nc">&nbsp;					next = findNext();</b>
<b class="nc">&nbsp;					if (next == null) {</b>
<b class="nc">&nbsp;						throw new NoSuchElementException();</b>
&nbsp;					}
&nbsp;				}
<b class="fc">&nbsp;				current = next;</b>
<b class="fc">&nbsp;				next = null;</b>
<b class="fc">&nbsp;				V value = term(current);</b>
<b class="fc">&nbsp;				set.add(value);</b>
<b class="fc">&nbsp;				return value;</b>
&nbsp;			}
&nbsp;
&nbsp;			@Override
&nbsp;			public void remove() {
<b class="nc">&nbsp;				if (current == null) {</b>
<b class="nc">&nbsp;					throw new IllegalStateException();</b>
&nbsp;				}
<b class="nc">&nbsp;				removeIteration(iter, term(current));</b>
<b class="nc">&nbsp;				current = null;</b>
&nbsp;			}
&nbsp;
&nbsp;			private Statement findNext() {
<b class="fc">&nbsp;				while (iter.hasNext()) {</b>
<b class="fc">&nbsp;					Statement st = iter.next();</b>
<b class="pc">&nbsp;					if (accept(st)) {</b>
<b class="fc">&nbsp;						return st;</b>
&nbsp;					}
<b class="nc">&nbsp;				}</b>
<b class="fc">&nbsp;				return null;</b>
&nbsp;			}
&nbsp;
&nbsp;			private boolean accept(Statement st) {
<b class="pc">&nbsp;				return !set.contains(term(st));</b>
&nbsp;			}
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public Iterator&lt;V&gt; iterator() {
<b class="fc">&nbsp;			return new ValueSetIterator(AbstractModel.this.iterator());</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public void clear() {
<b class="nc">&nbsp;			AbstractModel.this.clear();</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public boolean isEmpty() {
<b class="fc">&nbsp;			return AbstractModel.this.isEmpty();</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public int size() {
<b class="fc">&nbsp;			Iterator&lt;Statement&gt; iter = AbstractModel.this.iterator();</b>
&nbsp;			try {
<b class="fc">&nbsp;				Set&lt;V&gt; set = new LinkedHashSet&lt;&gt;();</b>
<b class="fc">&nbsp;				while (iter.hasNext()) {</b>
<b class="fc">&nbsp;					set.add(term(iter.next()));</b>
&nbsp;				}
<b class="fc">&nbsp;				return set.size();</b>
&nbsp;			} finally {
<b class="fc">&nbsp;				AbstractModel.this.closeIterator(iter);</b>
<b class="nc">&nbsp;			}</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public boolean removeAll(Collection&lt;?&gt; c) {
<b class="nc">&nbsp;			boolean modified = false;</b>
<b class="nc">&nbsp;			Iterator&lt;?&gt; i = c.iterator();</b>
&nbsp;			try {
<b class="nc">&nbsp;				while (i.hasNext()) {</b>
<b class="nc">&nbsp;					modified |= remove(i.next());</b>
&nbsp;				}
&nbsp;			} finally {
<b class="nc">&nbsp;				closeIterator(c, i);</b>
<b class="nc">&nbsp;			}</b>
<b class="nc">&nbsp;			return modified;</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public Object[] toArray() {
<b class="nc">&nbsp;			Iterator&lt;Statement&gt; iter = AbstractModel.this.iterator();</b>
&nbsp;			try {
<b class="nc">&nbsp;				Set&lt;V&gt; set = new LinkedHashSet&lt;&gt;();</b>
<b class="nc">&nbsp;				while (iter.hasNext()) {</b>
<b class="nc">&nbsp;					set.add(term(iter.next()));</b>
&nbsp;				}
<b class="nc">&nbsp;				return set.toArray();</b>
&nbsp;			} finally {
<b class="nc">&nbsp;				AbstractModel.this.closeIterator(iter);</b>
<b class="nc">&nbsp;			}</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public &lt;T&gt; T[] toArray(T[] a) {
<b class="nc">&nbsp;			Iterator&lt;Statement&gt; iter = AbstractModel.this.iterator();</b>
&nbsp;			try {
<b class="nc">&nbsp;				Set&lt;V&gt; set = new LinkedHashSet&lt;&gt;();</b>
<b class="nc">&nbsp;				while (iter.hasNext()) {</b>
<b class="nc">&nbsp;					set.add(term(iter.next()));</b>
&nbsp;				}
<b class="nc">&nbsp;				return set.toArray(a);</b>
&nbsp;			} finally {
<b class="nc">&nbsp;				AbstractModel.this.closeIterator(iter);</b>
<b class="nc">&nbsp;			}</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public boolean containsAll(Collection&lt;?&gt; c) {
<b class="nc">&nbsp;			Iterator&lt;?&gt; e = c.iterator();</b>
&nbsp;			try {
<b class="nc">&nbsp;				while (e.hasNext()) {</b>
<b class="nc">&nbsp;					if (!contains(e.next())) {</b>
<b class="nc">&nbsp;						return false;</b>
&nbsp;					}
&nbsp;				}
<b class="nc">&nbsp;				return true;</b>
&nbsp;			} finally {
<b class="nc">&nbsp;				closeIterator(c, e);</b>
<b class="nc">&nbsp;			}</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public boolean addAll(Collection&lt;? extends V&gt; c) {
<b class="nc">&nbsp;			Iterator&lt;? extends V&gt; e = c.iterator();</b>
&nbsp;			try {
<b class="nc">&nbsp;				boolean modified = false;</b>
<b class="nc">&nbsp;				while (e.hasNext()) {</b>
<b class="nc">&nbsp;					if (add(e.next())) {</b>
<b class="nc">&nbsp;						modified = true;</b>
&nbsp;					}
&nbsp;				}
<b class="nc">&nbsp;				return modified;</b>
&nbsp;			} finally {
<b class="nc">&nbsp;				closeIterator(c, e);</b>
<b class="nc">&nbsp;			}</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public boolean retainAll(Collection&lt;?&gt; c) {
<b class="nc">&nbsp;			Iterator&lt;V&gt; e = iterator();</b>
&nbsp;			try {
<b class="nc">&nbsp;				boolean modified = false;</b>
<b class="nc">&nbsp;				while (e.hasNext()) {</b>
<b class="nc">&nbsp;					if (!c.contains(e.next())) {</b>
<b class="nc">&nbsp;						e.remove();</b>
<b class="nc">&nbsp;						modified = true;</b>
&nbsp;					}
&nbsp;				}
<b class="nc">&nbsp;				return modified;</b>
&nbsp;			} finally {
<b class="nc">&nbsp;				closeIterator(e);</b>
<b class="nc">&nbsp;			}</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public abstract boolean add(V term);
&nbsp;
&nbsp;		protected abstract V term(Statement st);
&nbsp;
&nbsp;		protected abstract void removeIteration(Iterator&lt;Statement&gt; iter, V term);
&nbsp;
&nbsp;		protected void closeIterator(Iterator&lt;?&gt; iter) {
<b class="nc">&nbsp;			AbstractModel.this.closeIterator(((ValueSetIterator) iter).iter);</b>
&nbsp;		}
&nbsp;
&nbsp;		private void closeIterator(Collection&lt;?&gt; c, Iterator&lt;?&gt; e) {
<b class="nc">&nbsp;			if (c instanceof AbstractModel) {</b>
<b class="nc">&nbsp;				((AbstractModel) c).closeIterator(e);</b>
<b class="nc">&nbsp;			} else if (c instanceof ValueSet) {</b>
<b class="nc">&nbsp;				((ValueSet&lt;?&gt;) c).closeIterator(e);</b>
&nbsp;			}
&nbsp;		}
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Called by aggregate sets when a term has been removed from a term iterator. Exactly one of the last four terms
&nbsp;	 * will be non-empty.
&nbsp;	 *
&nbsp;	 * @param iter     The iterator used to navigate the live set (never null)
&nbsp;	 * @param subj     the subject term to be removed or null
&nbsp;	 * @param pred     the predicate term to be removed or null
&nbsp;	 * @param obj      the object term to be removed or null
&nbsp;	 * @param contexts an array of one context term to be removed or an empty array
&nbsp;	 */
&nbsp;	public abstract void removeTermIteration(Iterator&lt;Statement&gt; iter, Resource subj, IRI pred, Value obj,
&nbsp;			Resource... contexts);
&nbsp;
&nbsp;	/**
&nbsp;	 * Cleans up any resources used by this iterator. After this call the given iterator should not be used.
&nbsp;	 *
&nbsp;	 * @param iter Iterator to clean up
&nbsp;	 */
&nbsp;	protected void closeIterator(Iterator&lt;?&gt; iter) {
<b class="pc">&nbsp;		if (iter instanceof ValueSet.ValueSetIterator) {</b>
<b class="nc">&nbsp;			closeIterator(((ValueSet.ValueSetIterator) iter).iter);</b>
&nbsp;		}
&nbsp;	}
&nbsp;
&nbsp;	private void closeIterator(Collection&lt;?&gt; c, Iterator&lt;?&gt; e) {
<b class="fc">&nbsp;		if (c instanceof AbstractModel) {</b>
<b class="fc">&nbsp;			((AbstractModel) c).closeIterator(e);</b>
<b class="pc">&nbsp;		} else if (c instanceof ValueSet) {</b>
<b class="nc">&nbsp;			((ValueSet&lt;?&gt;) c).closeIterator(e);</b>
&nbsp;		}
&nbsp;	}
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2022-09-18 08:22</div>
</div>
</body>
</html>
